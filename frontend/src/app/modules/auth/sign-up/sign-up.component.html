<div class="flex flex-col flex-auto items-center sm:justify-center min-w-0" >

    <div class="   sm:p-6 sm:rounded-xl sm:shadow-sm sm:bg-card" >
        <div class="max-w-md sm:w-80 mx-auto sm:mx-0" >
            <!-- Logo -->
            <div class="flex justify-center mb-4">
                <div class="w-20">
                    <img ngSrc="assets/images/logo/logo-text.svg" height="60" width="60" alt="EngFlexy">
                </div>
            </div>
            <div class="mt-4 text-xl text-center font-extrabold tracking-tight leading-tight">Registration</div>
            <mat-stepper>
                <mat-step [stepControl]="signUpForm">
                    <div class="flex items-baseline mt-2 font-medium">
                        <div>Already have an account?</div>
                        <a class="ml-1 text-primary-500 hover:underline" [routerLink]="['/sign-in']">sign in</a>
                    </div>
                    <!-- Sign Up form -->
                    <form class="mt-2" [formGroup]="signUpForm">
                        <!-- Name field -->
                        <div class="flex gap-4">
                        <mat-form-field class="flex-auto w-full fuse-mat-dense">
                            <mat-label>Full name</mat-label>
                            <input id="name" matInput [formControlName]="'name'">
                            <mat-error *ngIf="signUpForm.get('name').hasError('required')">
                                Full name is required
                            </mat-error>
                        </mat-form-field>

                        <!-- Email field -->
                        <mat-form-field class="flex-auto w-full fuse-mat-dense">
                            <mat-label>Email address</mat-label>
                            <input id="email" matInput [formControlName]="'email'">
                            <mat-error *ngIf="signUpForm.get('email').hasError('required')">
                                Email address is required
                            </mat-error>
                            <mat-error *ngIf="signUpForm.get('email').hasError('email')">
                                Please enter a valid email address
                            </mat-error>
                        </mat-form-field>
                        </div>
                        <div class="flex gap-4">
                        <mat-form-field class="flex-auto w-full fuse-mat-dense">
                            <mat-label>Collaborator type</mat-label>
                            <mat-select required [formControlName]="'type'">
                                <mat-option value="school">School</mat-option>
                                <mat-option value="teacher">Teacher</mat-option>
                            </mat-select>
                            <mat-error *ngIf="signUpForm.get('type').hasError('required')">
                                This field is required
                            </mat-error>
                        </mat-form-field>

                        <mat-form-field class="flex-auto w-full fuse-mat-dense">
                            <mat-label>Phone number</mat-label>
                            <input matInput [placeholder]="'Ex: +212 6xxxxxxxx'" [formControlName]="'phone'" name="phone">
                            <mat-error *ngIf="signUpForm.get('phone').hasError('required')">
                                Phone number is required
                            </mat-error>
                        </mat-form-field>
                        </div>
                        <!-- Password field -->
                        <mat-form-field class="w-full">
                            <mat-label>Password</mat-label>
                            <input id="password" matInput type="password" [formControlName]="'password'" #passwordField>
                            <button mat-icon-button type="button"
                                    (click)="passwordField.type === 'password' ? passwordField.type = 'text' : passwordField.type = 'password'"
                                    matSuffix>
                                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'password'" [svgIcon]="'heroicons_solid:eye'"></mat-icon>
                                <mat-icon class="icon-size-5" *ngIf="passwordField.type === 'text'" [svgIcon]="'heroicons_solid:eye-slash'"></mat-icon>
                            </button>
                            <mat-error>Password is required</mat-error>
                        </mat-form-field>

                        <!-- Submit button -->
                        <button class="fuse-mat-button-large w-full" mat-flat-button [color]="'primary'" [disabled]="signUpForm.disabled" (click)="signUp()">
                            <span *ngIf="!signUpForm.disabled">Create your free account</span>
                            <mat-progress-spinner *ngIf="signUpForm.disabled" [diameter]="24" [mode]="'indeterminate'"></mat-progress-spinner>
                        </button>
                    </form>
                </mat-step>
                <mat-step [stepControl]="validationForm">
                    <form class="mt-2" [formGroup]="validationForm">
                        <div class="text-center mb-4 font-medium">
                            <p class="font-medium">Enter the 4-digit password</p>
                            <p>that was sent to you by your email</p>
                        </div>
                        <mat-form-field class="flex-auto w-full fuse-mat-dense">
                            <mat-label>Email</mat-label>
                            <input matInput name="username" formControlName="username" placeholder="Enter username" [value]="displayedEmail">
                        </mat-form-field>
                        <mat-form-field class="flex-auto w-full fuse-mat-dense">
                            <mat-label>Validation Code</mat-label>
                            <input id="validationCode" matInput name="validationCode" formControlName="validationCode" placeholder="Enter validation code">
                        </mat-form-field>
                        <button class="fuse-mat-button-large w-full" mat-flat-button color="primary" (click)="validateUser()">
                            Validate User
                        </button>
                    </form>
                </mat-step>
            </mat-stepper>
        </div>
    </div>
</div>
