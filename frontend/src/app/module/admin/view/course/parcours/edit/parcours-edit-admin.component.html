<p-dialog [(visible)]="editDialog" [draggable]="false" [maximizable]="true" [modal]="true"
          [resizable]="false" [style]="{width: '70vw'}" header="{{'parcours.tabPan' | translate}}" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <p-tabView>
            <p-tabPanel header="{{'parcours.tabPan' | translate}}">
                <div class="grid">

                    <div class="field col-12 md:col-6">
                        <label for="1">{{'parcours.datePublication' | translate}}</label>
                        <p-calendar [(ngModel)]="item.datePublication" [showSeconds]="false" [showTime]="true" appendTo="body"
                                    dateFormat="{{dateFormat}}"
                                    id="1"
                                    placeholder="{{'parcours.datePublication' | translate}}">
                        </p-calendar>

                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="2">{{'parcours.dateCreation' | translate}}</label>
                        <p-calendar [(ngModel)]="item.dateCreation" [showSeconds]="false" [showTime]="true" appendTo="body"
                                    dateFormat="{{dateFormat}}"
                                    id="2"
                                    placeholder="{{'parcours.dateCreation' | translate}}">
                        </p-calendar>

                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="3">{{'parcours.description' | translate}}</label>
                        <textarea [(ngModel)]="item.description" cols="30" id="3" pInputTextarea
                                  placeholder="{{'parcours.description' | translate}}" rows="5"
                        ></textarea>

                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="4">{{'parcours.code' | translate}}<span style="color: red;">*</span></label>
                        <input [(ngModel)]="item.code" [ngClass]="{'ng-invalid ng-dirty' : !validParcoursCode}" class="mb-2 mr-2" id="4"
                               pInputText placeholder="{{'parcours.code' | translate}}"
                               type="text"/>
                        <small *ngIf='!validParcoursCode' class='p-error'>Code est obligatoire.</small>
                    </div>


                    <div class="field col-12 md:col-6">
                        <label for="5">{{'parcours.libelle' | translate}}<span style="color: red;">*</span></label>
                        <input [(ngModel)]="item.libelle" [ngClass]="{'ng-invalid ng-dirty' : !validParcoursLibelle}" class="mb-2 mr-2" id="5"
                               pInputText placeholder="{{'parcours.libelle' | translate}}"
                               type="text"/>
                        <small *ngIf='!validParcoursLibelle' class='p-error'>Libelle est obligatoire.</small>
                    </div>


                    <div class="field col-12 md:col-6">
                        <label for="6">{{'parcours.numeroOrder' | translate}}</label>
                        <p-inputNumber [(ngModel)]="item.numeroOrder" class="mb-2 mr-2" id="6"
                                       placeholder="{{'parcours.numeroOrder' | translate}}">
                        </p-inputNumber>

                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="7">{{'parcours.nombreCours' | translate}}</label>
                        <p-inputNumber [(ngModel)]="item.nombreCours" class="mb-2 mr-2" id="7"
                                       placeholder="{{'parcours.nombreCours' | translate}}">
                        </p-inputNumber>

                    </div>

                    <div class="field col-11 md:col-6">
                        <label for="8">{{'parcours.centre' | translate}}</label>
                        <p-dropdown [(ngModel)]="item.centre" [filter]="true" [options]="centres" [showClear]="true" appendTo="body"
                                    filterMatchMode="contains"
                                    id="8" optionLabel="ref"
                                    placeholder="{{'parcours.centre' | translate}}">
                        </p-dropdown>

                    </div>

                </div>
            </p-tabPanel>
            <p-tabPanel header="{{'parcours.courss' | translate}}">
                <p-tabView [(activeIndex)]="activeTab">
                    <p-tabPanel header="CrÃ©ation">
                        <div class="grid">
                            <div class="field col-12 md:col-6">
                                <label for="1">Code<span style="color: red;">*</span></label>
                                <input [(ngModel)]="courssElement.code" [ngClass]="{'ng-invalid ng-dirty' : !validCourssCode}" autofocus class="mb-2 mr-2"
                                       id="1" pInputText placeholder="Code"
                                       type="text">
                                <small *ngIf='!validCourssCode' class='p-error'>Code est obligatoire.</small>
                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="2">Libelle<span style="color: red;">*</span></label>
                                <input [(ngModel)]="courssElement.libelle" [ngClass]="{'ng-invalid ng-dirty' : !validCourssLibelle}" autofocus class="mb-2 mr-2"
                                       id="2" pInputText placeholder="Libelle"
                                       type="text">
                                <small *ngIf='!validCourssLibelle' class='p-error'>Libelle est obligatoire.</small>
                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="3">{{'cours.description' | translate}}</label>
                                <textarea [(ngModel)]="item.description" cols="30" id="3" pInputTextarea
                                          placeholder="{{'cours.description' | translate}}"
                                          rows="5"
                                ></textarea>

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="4">Image</label>
                                <input [(ngModel)]="courssElement.image" autofocus class="mb-2 mr-2" id="4"
                                       pInputText placeholder="Image" type="text">

                            </div>
                            <div class="field col-11 md:col-6">
                                <label>Etat cours</label>
                                <p-dropdown [(ngModel)]="courssElement.etatCours" [filter]="true" [options]="etatCourss"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="5"
                                            optionLabel="libelle"
                                            placeholder="Etat cours">
                                </p-dropdown>

                            </div>

                            <div class="field col-12 md:col-6">
                                <label for="7">Nombre section finalise</label>
                                <p-inputNumber [(ngModel)]="courssElement.nombreSectionFinalise" class="mb-2 mr-2"
                                               id="nombreSectionFinalise"
                                               placeholder="Nombre section finalise"></p-inputNumber>

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="8">Nombre section en cours</label>
                                <p-inputNumber [(ngModel)]="courssElement.nombreSectionEnCours" class="mb-2 mr-2"
                                               id="nombreSectionEnCours"
                                               placeholder="Nombre section en cours"></p-inputNumber>

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="9">Nombre link en cours</label>
                                <p-inputNumber [(ngModel)]="courssElement.nombreLinkEnCours" class="mb-2 mr-2"
                                               id="nombreLinkEnCours"
                                               placeholder="Nombre link en cours"></p-inputNumber>

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="10">Nombre link finalise</label>
                                <p-inputNumber [(ngModel)]="courssElement.nombreLinkFinalise" class="mb-2 mr-2"
                                               id="nombreLinkFinalise"
                                               placeholder="Nombre link finalise"></p-inputNumber>

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="11">Numero order</label>
                                <p-inputNumber [(ngModel)]="courssElement.numeroOrder" class="mb-2 mr-2" id="numeroOrder"
                                               placeholder="Numero order"></p-inputNumber>

                            </div>
                            <div class="field col-12 md:col-1">
                                <button (click)="addCourss()" class="mt-4" icon="pi pi-plus" label="OK" pButton pRipple
                                        type="button"></button>
                            </div>

                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Liste {{item.courss?.length > 0 ? '(' + item.courss?.length + ')' : ''}}">
                        <div class="card">
                            <p-table [scrollable]="true" [value]="item.courss" scrollHeight="200px">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Code</th>
                                        <th>Libelle</th>
                                        <th>Description</th>
                                        <th>Image</th>
                                        <th>Etat cours</th>
                                        <th>Nombre section finalise</th>
                                        <th>Nombre section en cours</th>
                                        <th>Nombre link en cours</th>
                                        <th>Nombre link finalise</th>
                                        <th>Numero order</th>
                                        <th>Actions</th>
                                    </tr>
                                </ng-template>
                                <ng-template let-p pTemplate="body">
                                    <tr>
                                        <td>{{p.code}}</td>
                                        <td>{{p.libelle}}</td>
                                        <td>{{p.description}}</td>
                                        <td>{{p.image}}</td>
                                        <td>{{p.etatCours?.libelle}}</td>
                                        <td>{{p.nombreSectionFinalise}}</td>
                                        <td>{{p.nombreSectionEnCours}}</td>
                                        <td>{{p.nombreLinkEnCours}}</td>
                                        <td>{{p.nombreLinkFinalise}}</td>
                                        <td>{{p.numeroOrder}}</td>
                                        <td>
                                            <button (click)="deleteCourss(p)" class="p-button-rounded p-button-danger" icon="pi pi-times" pButton
                                                    type="button"></button>
                                            <button (click)="editCourss(p)" class="p-button-rounded p-button-success mr-2" icon="pi pi-pencil" pButton
                                                    type="button"></button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>

                    </p-tabPanel>
                </p-tabView>
            </p-tabPanel>

            <p-tabPanel header="{{'parcours.etudiants' | translate}}">
                <p-tabView [(activeIndex)]="activeTab">
                    <p-tabPanel header="CrÃ©ation">
                        <div class="grid">
                            <div class="field col-12 md:col-6">
                                <label for="1">Ref<span style="color: red;">*</span></label>
                                <input [(ngModel)]="etudiantsElement.ref" [ngClass]="{'ng-invalid ng-dirty' : !validEtudiantsRef}" autofocus class="mb-2 mr-2"
                                       id="1" pInputText placeholder="Ref"
                                       type="text">
                                <small *ngIf='!validEtudiantsRef' class='p-error'>Ref est obligatoire.</small>
                            </div>
                            <div class="field col-11 md:col-6">
                                <label>Teacher locality</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.teacherLocality" [filter]="true"
                                            [options]="teacherLocalitys"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="2"
                                            optionLabel="libelle"
                                            placeholder="Teacher locality">
                                </p-dropdown>

                            </div>

                            <div class="field col-12 md:col-6">
                                <label for="3">Group option</label>
                                <input [(ngModel)]="etudiantsElement.groupOption" autofocus class="mb-2 mr-2" id="3"
                                       pInputText placeholder="Group option" type="text">

                            </div>
                            <div class="field col-11 md:col-6">
                                <label>Etat etudiant schedule</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.etatEtudiantSchedule" [filter]="true"
                                            [options]="etatEtudiantSchedules"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="4"
                                            optionLabel="libelle"
                                            placeholder="Etat etudiant schedule">
                                </p-dropdown>

                            </div>

                            <div class="field col-11 md:col-6">
                                <label>Groupe etude</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.groupeEtude" [filter]="true"
                                            [options]="groupeEtudes"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="7"
                                            optionLabel="libelle"
                                            placeholder="Groupe etude">
                                </p-dropdown>

                            </div>

                            <div class="field col-12  md:col-6">
                                <label>Groupe etudiant</label>
                                <p-multiSelect [(ngModel)]="etudiantsElement.groupeEtudiantDetails" [options]="groupeEtudiantDetails"
                                               [virtualScroll]="true"
                                               appendTo="body" defaultLabel="Selectionner un Groupe etudiant"
                                               display="chip"
                                               itemSize="30" optionLabel="groupeEtudiant.id"></p-multiSelect>
                            </div>
                            <div class="field col-11 md:col-6">
                                <label>Pack student</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.packStudent" [filter]="true"
                                            [options]="packStudents"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="9"
                                            optionLabel="libelle"
                                            placeholder="Pack student">
                                </p-dropdown>

                            </div>

                            <div class="field col-11 md:col-6">
                                <label>Statut social</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.statutSocial" [filter]="true"
                                            [options]="statutSocials"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="10"
                                            optionLabel="libelle"
                                            placeholder="Statut social">
                                </p-dropdown>

                            </div>

                            <div class="field col-11 md:col-6">
                                <label>Interet etudiant</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.interetEtudiant" [filter]="true"
                                            [options]="interetEtudiants"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="11"
                                            optionLabel="libelle"
                                            placeholder="Interet etudiant">
                                </p-dropdown>

                            </div>

                            <div class="field col-11 md:col-6">
                                <label>Niveau etude</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.niveauEtude" [filter]="true"
                                            [options]="niveauEtudes"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="12"
                                            optionLabel="libelle"
                                            placeholder="Niveau etude">
                                </p-dropdown>

                            </div>

                            <div class="field col-11 md:col-6">
                                <label>Skill</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.skill" [filter]="true" [options]="skills"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="13"
                                            optionLabel="libelle"
                                            placeholder="Skill">
                                </p-dropdown>

                            </div>

                            <div class="field col-11 md:col-6">
                                <label>Fonction</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.fonction" [filter]="true"
                                            [options]="fonctions"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="14"
                                            optionLabel="libelle"
                                            placeholder="Fonction">
                                </p-dropdown>

                            </div>

                            <div class="field col-11 md:col-6">
                                <label>Langue</label>
                                <p-dropdown [(ngModel)]="etudiantsElement.langue" [filter]="true" [options]="langues"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="15"
                                            optionLabel="libelle"
                                            placeholder="Langue">
                                </p-dropdown>

                            </div>

                            <div class="field  align-inputswitch col-12 md:col-6">
                                <div class="label-inputswitch">
                                    <label for="16">Subscribe</label>
                                </div>
                                <div class="input-switch">
                                    <p-inputSwitch [(ngModel)]="etudiantsElement.subscribe" id="16"></p-inputSwitch>
                                </div>
                            </div>
                            <div class="field  align-inputswitch col-12 md:col-6">
                                <div class="label-inputswitch">
                                    <label for="17">Credentials non expired</label>
                                </div>
                                <div class="input-switch">
                                    <p-inputSwitch [(ngModel)]="etudiantsElement.credentialsNonExpired"
                                                   id="17"></p-inputSwitch>
                                </div>
                            </div>
                            <div class="field  align-inputswitch col-12 md:col-6">
                                <div class="label-inputswitch">
                                    <label for="18">Enabled</label>
                                </div>
                                <div class="input-switch">
                                    <p-inputSwitch [(ngModel)]="etudiantsElement.enabled" id="18"></p-inputSwitch>
                                </div>
                            </div>
                            <div class="field  align-inputswitch col-12 md:col-6">
                                <div class="label-inputswitch">
                                    <label for="19">Account non expired</label>
                                </div>
                                <div class="input-switch">
                                    <p-inputSwitch [(ngModel)]="etudiantsElement.accountNonExpired"
                                                   id="19"></p-inputSwitch>
                                </div>
                            </div>
                            <div class="field  align-inputswitch col-12 md:col-6">
                                <div class="label-inputswitch">
                                    <label for="20">Account non locked</label>
                                </div>
                                <div class="input-switch">
                                    <p-inputSwitch [(ngModel)]="etudiantsElement.accountNonLocked"
                                                   id="20"></p-inputSwitch>
                                </div>
                            </div>
                            <div class="field  align-inputswitch col-12 md:col-6">
                                <div class="label-inputswitch">
                                    <label for="21">Password changed</label>
                                </div>
                                <div class="input-switch">
                                    <p-inputSwitch [(ngModel)]="etudiantsElement.passwordChanged"
                                                   id="21"></p-inputSwitch>
                                </div>
                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="22">Username</label>
                                <input [(ngModel)]="etudiantsElement.username" autofocus class="mb-2 mr-2" id="22"
                                       pInputText placeholder="Username" type="text">

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="23">Password</label>
                                <input [(ngModel)]="etudiantsElement.password" autofocus class="mb-2 mr-2" id="23"
                                       pInputText placeholder="Password" type="text">

                            </div>
                            <div class="field col-12 md:col-1">
                                <button (click)="addEtudiants()" class="mt-4" icon="pi pi-plus" label="OK" pButton pRipple
                                        type="button"></button>
                            </div>

                        </div>
                    </p-tabPanel>
                    <p-tabPanel header="Liste {{item.etudiants?.length > 0 ? '(' + item.etudiants?.length + ')' : ''}}">
                        <div class="card">
                            <p-table [scrollable]="true" [value]="item.etudiants" scrollHeight="200px">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Ref</th>
                                        <th>Teacher locality</th>
                                        <th>Group option</th>
                                        <th>Etat etudiant schedule</th>
                                        <th>Groupe etude</th>
                                        <th>Pack student</th>
                                        <th>Statut social</th>
                                        <th>Interet etudiant</th>
                                        <th>Niveau etude</th>
                                        <th>Skill</th>
                                        <th>Fonction</th>
                                        <th>Langue</th>
                                        <th>Subscribe</th>
                                        <th>Credentials non expired</th>
                                        <th>Enabled</th>
                                        <th>Account non expired</th>
                                        <th>Account non locked</th>
                                        <th>Password changed</th>
                                        <th>Username</th>
                                        <th>Password</th>
                                        <th>Actions</th>
                                    </tr>
                                </ng-template>
                                <ng-template let-p pTemplate="body">
                                    <tr>
                                        <td>{{p.ref}}</td>
                                        <td>{{p.teacherLocality?.libelle}}</td>
                                        <td>{{p.groupOption}}</td>
                                        <td>{{p.etatEtudiantSchedule?.libelle}}</td>
                                        <td>{{p.groupeEtude?.libelle}}</td>
                                        <td>{{p.packStudent?.libelle}}</td>
                                        <td>{{p.statutSocial?.libelle}}</td>
                                        <td>{{p.interetEtudiant?.libelle}}</td>
                                        <td>{{p.niveauEtude?.libelle}}</td>
                                        <td>{{p.skill?.libelle}}</td>
                                        <td>{{p.fonction?.libelle}}</td>
                                        <td>{{p.langue?.libelle}}</td>
                                        <td><i *ngIf="p.subscribe" class="pi pi-check checked-toogle"></i>
                                            <i *ngIf="!p.subscribe" class="pi pi-times unchecked-toogle"></i>
                                        </td>
                                        <td><i *ngIf="p.credentialsNonExpired" class="pi pi-check checked-toogle"></i>
                                            <i *ngIf="!p.credentialsNonExpired"
                                               class="pi pi-times unchecked-toogle"></i>
                                        </td>
                                        <td><i *ngIf="p.enabled" class="pi pi-check checked-toogle"></i>
                                            <i *ngIf="!p.enabled" class="pi pi-times unchecked-toogle"></i>
                                        </td>
                                        <td><i *ngIf="p.accountNonExpired" class="pi pi-check checked-toogle"></i>
                                            <i *ngIf="!p.accountNonExpired" class="pi pi-times unchecked-toogle"></i>
                                        </td>
                                        <td><i *ngIf="p.accountNonLocked" class="pi pi-check checked-toogle"></i>
                                            <i *ngIf="!p.accountNonLocked" class="pi pi-times unchecked-toogle"></i>
                                        </td>
                                        <td><i *ngIf="p.passwordChanged" class="pi pi-check checked-toogle"></i>
                                            <i *ngIf="!p.passwordChanged" class="pi pi-times unchecked-toogle"></i>
                                        </td>
                                        <td>{{p.username}}</td>
                                        <td>{{p.password}}</td>
                                        <td>
                                            <button (click)="deleteEtudiants(p)" class="p-button-rounded p-button-danger" icon="pi pi-times"
                                                    pButton
                                                    type="button"></button>
                                            <button (click)="editEtudiants(p)" class="p-button-rounded p-button-success mr-2" icon="pi pi-pencil" pButton
                                                    type="button"></button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>

                    </p-tabPanel>
                </p-tabView>
            </p-tabPanel>


        </p-tabView>

    </ng-template>

    <ng-template pTemplate="footer">
        <div class="p-flexbox">

            <button (click)="edit()" icon="pi pi-check" label="{{'validate' | translate}}" pButton pRipple></button>


            <button (click)="hideEditDialog()" class="p-button-outlined" icon="pi pi-times" label="{{'cancel' | translate}}" pButton
                    pRipple></button>


        </div>
    </ng-template>

</p-dialog>
