<p-dialog [(visible)]="createDialog" [draggable]="false" [maximizable]="true"
          [modal]="true" [resizable]="false" [style]="{width: '70vw'}" header="{{'vocabularyQuiz.tabPan' | translate}}" styleClass="p-fluid">
    <ng-template pTemplate="content">
        <p-tabView>
            <p-tabPanel header="{{'vocabularyQuiz.tabPan' | translate}}">
                <div class="grid">

                    <div class="field col-12 md:col-6">
                        <label for="1">{{'vocabularyQuiz.libelle' | translate}}<span
                            style="color: red;">*</span></label>
                        <input [(ngModel)]="item.libelle" [ngClass]="{'ng-invalid ng-dirty' : !validVocabularyQuizLibelle}" class="mb-2 mr-2"
                               id="1" pInputText placeholder="{{'vocabularyQuiz.libelle' | translate}}"
                               type="text"/>
                        <small *ngIf='!validVocabularyQuizLibelle' class='p-error'>Libelle est obligatoire.</small>
                    </div>


                    <div class="field col-12 md:col-6">
                        <label for="2">{{'vocabularyQuiz.dateDebut' | translate}}</label>
                        <p-calendar [(ngModel)]="item.dateDebut" [showSeconds]="false" [showTime]="true" appendTo="body"
                                    dateFormat="{{dateFormat}}"
                                    id="2"
                                    placeholder="{{'vocabularyQuiz.dateDebut' | translate}}">
                        </p-calendar>

                    </div>

                    <div class="field col-12 md:col-6">
                        <label for="3">{{'vocabularyQuiz.dateFin' | translate}}</label>
                        <p-calendar [(ngModel)]="item.dateFin" [showSeconds]="false" [showTime]="true" appendTo="body"
                                    dateFormat="{{dateFormat}}" id="3"
                                    placeholder="{{'vocabularyQuiz.dateFin' | translate}}">
                        </p-calendar>

                    </div>

                    <div class="field col-11 md:col-6">
                        <label for="5">{{'vocabularyQuiz.section' | translate}}</label>
                        <p-dropdown [(ngModel)]="item.section" [filter]="true" [options]="sections" [showClear]="true"
                                    appendTo="body" filterMatchMode="contains"
                                    id="5" optionLabel="code"
                                    placeholder="{{'vocabularyQuiz.section' | translate}}">
                        </p-dropdown>

                    </div>

                </div>
            </p-tabPanel>
            <p-tabPanel header="{{'vocabularyQuiz.vocabularys' | translate}}">
                <p-tabView [(activeIndex)]="activeTab">
                    <p-tabPanel header="CrÃ©ation">
                        <div class="grid">
                            <div class="field col-12 md:col-6">
                                <label for="1">Ref</label>
                                <input [(ngModel)]="vocabularysElement.ref" autofocus class="mb-2 mr-2" id="1"
                                       pInputText placeholder="Ref" type="text">

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="2">Numero</label>
                                <p-inputNumber [(ngModel)]="vocabularysElement.numero" class="mb-2 mr-2" id="numero"
                                               placeholder="Numero"></p-inputNumber>

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="3">Word</label>
                                <input [(ngModel)]="vocabularysElement.word" autofocus class="mb-2 mr-2" id="3"
                                       pInputText placeholder="Word" type="text">

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="4">Libelle</label>
                                <input [(ngModel)]="vocabularysElement.libelle" autofocus class="mb-2 mr-2" id="4"
                                       pInputText placeholder="Libelle" type="text">

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="5">Result</label>
                                <input [(ngModel)]="vocabularysElement.result" autofocus class="mb-2 mr-2" id="5"
                                       pInputText placeholder="Result" type="text">

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="6">Explication</label>
                                <input [(ngModel)]="vocabularysElement.explication" autofocus class="mb-2 mr-2" id="6"
                                       pInputText placeholder="Explication" type="text">

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="7">Exemple</label>
                                <input [(ngModel)]="vocabularysElement.exemple" autofocus class="mb-2 mr-2" id="7"
                                       pInputText placeholder="Exemple" type="text">

                            </div>
                            <div class="field col-12 md:col-6">
                                <label for="8">Image</label>
                                <input [(ngModel)]="vocabularysElement.image" autofocus class="mb-2 mr-2" id="8"
                                       pInputText placeholder="Image" type="text">

                            </div>
                            <div class="field col-11 md:col-6">
                                <label>Section</label>
                                <p-dropdown [(ngModel)]="vocabularysElement.section" [filter]="true"
                                            [options]="sections"
                                            [showClear]="true" appendTo="body" filterMatchMode="contains" id="9"
                                            optionLabel="code"
                                            placeholder="Section">
                                </p-dropdown>

                            </div>

                            <div class="field col-12 md:col-1">
                                <button (click)="addVocabularys()" class="mt-4" icon="pi pi-plus" label="OK" pButton pRipple
                                        type="button"></button>
                            </div>

                        </div>
                    </p-tabPanel>
                    <p-tabPanel
                        header="Liste {{item.vocabularys?.length > 0 ? '(' + item.vocabularys?.length + ')' : ''}}">
                        <div class="card">
                            <p-table [scrollable]="true" [value]="item.vocabularys" scrollHeight="200px">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th>Ref</th>
                                        <th>Numero</th>
                                        <th>Word</th>
                                        <th>Libelle</th>
                                        <th>Result</th>
                                        <th>Explication</th>
                                        <th>Exemple</th>
                                        <th>Image</th>
                                        <th>Section</th>
                                        <th>Actions</th>
                                    </tr>
                                </ng-template>
                                <ng-template let-p pTemplate="body">
                                    <tr>
                                        <td>{{p.ref}}</td>
                                        <td>{{p.numero}}</td>
                                        <td>{{p.word}}</td>
                                        <td>{{p.libelle}}</td>
                                        <td>{{p.result}}</td>
                                        <td>{{p.explication}}</td>
                                        <td>{{p.exemple}}</td>
                                        <td>{{p.image}}</td>
                                        <td>{{p.section?.code}}</td>
                                        <td>
                                            <button (click)="deleteVocabularys(p)" class="p-button-rounded p-button-danger" icon="pi pi-times"
                                                    pButton
                                                    type="button"></button>
                                            <button (click)="editVocabularys(p)" class="p-button-rounded p-button-success mr-2" icon="pi pi-pencil"
                                                    pButton
                                                    type="button"></button>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>

                    </p-tabPanel>
                </p-tabView>
            </p-tabPanel>


        </p-tabView>

    </ng-template>

    <ng-template pTemplate="footer">
        <div class="p-flexbox">

            <button (click)="save()" icon="pi pi-check" label="{{'validate' | translate}}" pButton pRipple></button>


            <button (click)="hideCreateDialog()" class="p-button-outlined" icon="pi pi-times" label="{{'cancel' | translate}}" pButton
                    pRipple></button>


        </div>
    </ng-template>

</p-dialog>
